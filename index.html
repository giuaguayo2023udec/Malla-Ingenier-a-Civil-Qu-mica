<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular - Giulianna Aguayo Espinoza</title>

<style>
body {
    font-family: "Segoe UI", sans-serif;
    background: #F8E3E2;
    padding: 20px;
}

h1 {
    text-align: center;
}

#stats {
    text-align: center;
    margin-bottom: 20px;
    font-weight: bold;
}

button {
    background: #f3b6c2;
    border: none;
    padding: 10px 15px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    opacity: 0.8;
}

.container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 15px;
}

.semester {
    background: #F4D6D8;
    border-radius: 14px;
    padding: 12px;
}

.semester h3 {
    text-align: center;
}

.course {
    background: #c7b6e2; /* no aprobado */
    margin: 6px 0;
    padding: 6px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
}

.course.approved {
    background: #f6b7cc;
}

.course.prereq {
    background: #fff2a8;
}

.course.coreq {
    background: #c8f0d0;
}

.course.locked {
    opacity: 0.4;
    pointer-events: none;
}
</style>
</head>

<body>

<h1>Malla Curricular – Ingeniería Civil Química<br>Giulianna Aguayo Espinoza</h1>

<div id="stats">
    Ramos aprobados: <span id="approvedCount">0</span> |
    Créditos aprobados: <span id="creditsCount">0</span> |
    Progreso: <span id="progress">0%</span>
    <br><br>
    <button onclick="resetProgress()">Reiniciar malla</button>
</div>

<div class="container" id="malla"></div>

<script>
const courses = [
{ name:"Física I", credits:4, sem:1 },
{ name:"Álgebra I", credits:5, sem:1 },
{ name:"Cálculo I", credits:5, sem:1 },
{ name:"Química General I", credits:5, sem:1 },
{ name:"Introducción a la Ingeniería Química", credits:2, sem:1 },

{ name:"Física II", credits:4, sem:2, pre:["Física I"] },
{ name:"Álgebra II", credits:5, sem:2, pre:["Álgebra I"] },
{ name:"Cálculo II", credits:5, sem:2, pre:["Cálculo I"] },
{ name:"Química General II", credits:4, sem:2, pre:["Química General I"] },
{ name:"Introducción a la Innovación a la Ingeniería", credits:2, sem:2, pre:["Introducción a la Ingeniería Química"] },

{ name:"Cálculo III", credits:5, sem:3, pre:["Cálculo II","Álgebra II"] },
{ name:"Ecuaciones Diferenciales Ordinarias", credits:4, sem:3, pre:["Cálculo II","Álgebra II"] },
{ name:"Mecánica", credits:4, sem:3, pre:["Cálculo II","Álgebra II"], co:["Cálculo III"] },
{ name:"Balance de Materia y Energía", credits:4, sem:3, pre:["Química General II"] },
{ name:"Programación", credits:3, sem:3 },
{ name:"Complementaria 1", credits:3, sem:3 },

{ name:"Termodinámica", credits:4, sem:4, pre:["Cálculo II","Álgebra II","Física II","Balance de Materia y Energía"] },
{ name:"Mecánica de Fluidos", credits:5, sem:4, pre:["Mecánica","Cálculo III","Ecuaciones Diferenciales Ordinarias"] },
{ name:"Taller de Integración 1", credits:2, sem:4, pre:["Cálculo II","Álgebra II","Física II","Balance de Materia y Energía","Introducción a la Ingeniería Química"] },
{ name:"Cálculo Numérico", credits:4, sem:4, pre:["Cálculo III","Programación","Ecuaciones Diferenciales Ordinarias"] },
{ name:"Complementaria 2", credits:6, sem:4 },

{ name:"Química Orgánica", credits:4, sem:5, pre:["Química General II"] },
{ name:"Termodinámica de Mezclas", credits:4, sem:5, pre:["Termodinámica"] },
{ name:"Transferencia de Calor", credits:4, sem:5, pre:["Mecánica de Fluidos"] },
{ name:"Liderazgo y Comunicación", credits:3, sem:5 },
{ name:"Práctica Laboral", credits:2, sem:5 },
{ name:"Complementaria 3", credits:2, sem:5 },

{ name:"Estadística y Probabilidades", credits:4, sem:6, pre:["Cálculo II","Álgebra II"] },
{ name:"Termodinámica de Superficies", credits:4, sem:6, pre:["Termodinámica de Mezclas","Mecánica de Fluidos"], co:["Transferencia de Materia"] },
{ name:"Transferencia de Materia", credits:4, sem:6, pre:["Termodinámica de Mezclas"] },
{ name:"Innovación", credits:3, sem:6 },
{ name:"Taller de Integración 2", credits:2, sem:6, pre:["Transferencia de Calor"] },
{ name:"Complementaria 4", credits:2, sem:6 },

{ name:"Economía", credits:4, sem:7 },
{ name:"Diseño de Reactores Químicos", credits:5, sem:7, pre:["Termodinámica de Superficies"] },
{ name:"Dinámica y Control de Procesos", credits:5, sem:7, pre:["Transferencia de Materia"], co:["Diseño de Reactores Químicos"] },
{ name:"Laboratorio de Procesos Químicos", credits:3, sem:7, pre:["Transferencia de Materia","Transferencia de Calor"], co:["Diseño de Reactores Químicos"] },
{ name:"Inglés Comunicativo 1 Nivel Principiante", credits:3, sem:7 },

{ name:"Operaciones de Separación", credits:3, sem:8, pre:["Transferencia de Materia"] },
{ name:"Síntesis y Optimización de Procesos", credits:4, sem:8, pre:["Diseño de Reactores Químicos","Transferencia de Materia"] },
{ name:"Inglés Comunicativo 2 Nivel Elemental", credits:3, sem:8, pre:["Inglés Comunicativo 1 Nivel Principiante"] },
{ name:"Taller de Integración 3", credits:2, sem:8, pre:["Diseño de Reactores Químicos"] },
{ name:"Electiva 1", credits:6, sem:8 },

{ name:"Formulación y Evaluación de Proyectos", credits:4, sem:9 },
{ name:"Proyecto 1", credits:4, sem:9, pre:["Síntesis y Optimización de Procesos"] },
{ name:"Introducción a la Sustentabilidad en Ingeniería", credits:3, sem:9 },
{ name:"Inglés Comunicativo 3 Nivel Básico", credits:3, sem:9, pre:["Inglés Comunicativo 2 Nivel Elemental"] },
{ name:"Electiva 2", credits:6, sem:9 },

{ name:"Gestión de Empresas", credits:3, sem:10 },
{ name:"Proyecto 2", credits:4, sem:10, pre:["Proyecto 1"] },
{ name:"Gestión de Riesgos Químicos", credits:3, sem:10 },
{ name:"Inglés Comunicativo 4 Nivel Básico Alto", credits:3, sem:10, pre:["Inglés Comunicativo 3 Nivel Básico"] },
{ name:"Electiva 3", credits:6, sem:10 },

{ name:"Práctica Profesional", credits:4, sem:11 },
{ name:"Memoria de Título", credits:20, sem:11 }
];

let approved = JSON.parse(localStorage.getItem("approvedCourses")) || [];

function render() {
    const container = document.getElementById("malla");
    container.innerHTML = "";

    const totalCredits = courses.reduce((a,b)=>a+b.credits,0);
    let approvedCredits = 0;

    for(let s=1;s<=11;s++){
        const div = document.createElement("div");
        div.className="semester";
        div.innerHTML = `<h3>Semestre ${s}</h3>`;

        courses.filter(c=>c.sem===s).forEach(c=>{
            const d = document.createElement("div");
            d.className="course";
            d.textContent = `${c.name} (${c.credits})`;

            if(approved.includes(c.name)){
                d.classList.add("approved");
                approvedCredits += c.credits;
            }

            d.onclick = ()=>{
                if(approved.includes(c.name)){
                    approved = approved.filter(x=>x!==c.name);
                } else {
                    approved.push(c.name);
                }
                localStorage.setItem("approvedCourses",JSON.stringify(approved));
                render();
            };

            d.ondblclick = ()=>{
                document.querySelectorAll(".course").forEach(x=>x.classList.remove("prereq","coreq"));
                if(c.pre) c.pre.forEach(p=>{
                    document.querySelectorAll(".course").forEach(x=>{
                        if(x.textContent.includes(p)) x.classList.add("prereq");
                    });
                });
                if(c.co) c.co.forEach(p=>{
                    document.querySelectorAll(".course").forEach(x=>{
                        if(x.textContent.includes(p)) x.classList.add("coreq");
                    });
                });
            };

            div.appendChild(d);
        });

        container.appendChild(div);
    }

    document.getElementById("approvedCount").innerText = approved.length;
    document.getElementById("creditsCount").innerText = approvedCredits;
    document.getElementById("progress").innerText =
        Math.round((approvedCredits/totalCredits)*100) + "%";
}

function resetProgress(){
    if(confirm("¿Seguro que quieres reiniciar la malla?")){
        localStorage.removeItem("approvedCourses");
        approved = [];
        render();
    }
}

render();
</script>

</body>
</html>
