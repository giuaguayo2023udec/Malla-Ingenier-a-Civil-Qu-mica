<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular - Giulianna Aguayo Espinoza</title>

<style>
body {
    font-family: "Segoe UI", sans-serif;
    background: #fff5fa;
    padding: 20px;
}

/* T√çTULO */
h1 {
    text-align: center;
    color: #7a2e5c;
}

/* ESTAD√çSTICAS */
.stats {
    text-align: center;
    font-weight: bold;
    margin-bottom: 20px;
}

/* BOT√ìN */
button {
    background: #d8a3c9;
    border: none;
    padding: 10px 18px;
    border-radius: 10px;
    cursor: pointer;
    color: white;
    font-weight: bold;
    margin-bottom: 15px;
}

button:hover {
    background: #c78bb5;
}

/* GRID */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
}

/* SEMESTRES */
.semester {
    background: #fbe1ec;
    border-radius: 14px;
    padding: 12px;
}

/* RAMOS */
.course {
    padding: 8px;
    margin: 6px 0;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: 0.2s;
}

/* ESTADOS */
.available { background: #c7a3d8; }       /* violeta pastel */
.completed { background: #f4a6c1; }       /* rosado pastel */
.locked { background: #e0e0e0; color:#777; cursor: not-allowed; }
.prereq { background: #fff1a8 !important; } /* amarillo pastel */
.coreq { background: #bdf0c2 !important; }  /* verde pastel */

.course:hover { opacity: 0.85; }
</style>
</head>

<body>

<h1>Malla Curricular ‚Äì Giulianna Aguayo Espinoza<br>Ingenier√≠a Civil Qu√≠mica</h1>

<div style="text-align:center;">
    <button onclick="resetMalla()">üîÑ Reiniciar malla</button>
</div>

<div class="stats" id="stats"></div>
<div class="grid" id="grid"></div>

<script>
const courses = [
/* ================== SEMESTRE 1 ================== */
{ id:"fis1", name:"F√≠sica I", credits:4, sem:1, pre:[], co:[] },
{ id:"alg1", name:"√Ålgebra I", credits:5, sem:1, pre:[], co:[] },
{ id:"cal1", name:"C√°lculo I", credits:5, sem:1, pre:[], co:[] },
{ id:"qui1", name:"Qu√≠mica General I", credits:5, sem:1, pre:[], co:[] },
{ id:"introIQ", name:"Introducci√≥n a la Ingenier√≠a Qu√≠mica", credits:2, sem:1, pre:[], co:[] },

/* ================== SEMESTRE 2 ================== */
{ id:"fis2", name:"F√≠sica II", credits:4, sem:2, pre:["fis1"], co:[] },
{ id:"alg2", name:"√Ålgebra II", credits:5, sem:2, pre:["alg1"], co:[] },
{ id:"cal2", name:"C√°lculo II", credits:5, sem:2, pre:["cal1"], co:[] },
{ id:"qui2", name:"Qu√≠mica General II", credits:4, sem:2, pre:["qui1"], co:[] },
{ id:"introInnov", name:"Introducci√≥n a la Innovaci√≥n", credits:2, sem:2, pre:["introIQ"], co:[] },

/* ================== SEMESTRE 3 ================== */
{ id:"cal3", name:"C√°lculo III", credits:5, sem:3, pre:["cal2","alg2"], co:[] },
{ id:"edo", name:"Ecuaciones Diferenciales", credits:4, sem:3, pre:["cal2","alg2"], co:[] },
{ id:"mec", name:"Mec√°nica", credits:4, sem:3, pre:["cal2","alg2"], co:["cal3"] },
{ id:"bme", name:"Balance de Materia y Energ√≠a", credits:4, sem:3, pre:["qui2"], co:[] },
{ id:"prog", name:"Programaci√≥n", credits:3, sem:3, pre:[], co:[] },
{ id:"comp1", name:"Complementaria 1", credits:3, sem:3, pre:[], co:[] },

/* ================== SEMESTRE 4 ================== */
{ id:"termo", name:"Termodin√°mica", credits:4, sem:4, pre:["cal2","alg2","fis2","bme"], co:[] },
{ id:"mecflu", name:"Mec√°nica de Fluidos", credits:5, sem:4, pre:["mec","cal3","edo"], co:[] },
{ id:"taller1", name:"Taller de Integraci√≥n 1", credits:2, sem:4, pre:["cal2","alg2","fis2","bme","introIQ"], co:[] },
{ id:"calcnum", name:"C√°lculo Num√©rico", credits:4, sem:4, pre:["cal3","prog","edo"], co:[] },
{ id:"comp2", name:"Complementaria 2", credits:6, sem:4, pre:[], co:[] },

/* ================== SEMESTRE 5 ================== */
{ id:"org", name:"Qu√≠mica Org√°nica", credits:4, sem:5, pre:["qui2"], co:[] },
{ id:"termmez", name:"Termodin√°mica de Mezclas", credits:4, sem:5, pre:["termo"], co:[] },
{ id:"transcal", name:"Transferencia de Calor", credits:4, sem:5, pre:["mecflu"], co:[] },
{ id:"lider", name:"Liderazgo y Comunicaci√≥n", credits:3, sem:5, pre:[], co:[] },
{ id:"pract", name:"Pr√°ctica Laboral", credits:2, sem:5, pre:[], co:[] },
{ id:"comp3", name:"Complementaria 3", credits:2, sem:5, pre:[], co:[] },

/* ================== SEMESTRE 6 ================== */
{ id:"estad", name:"Estad√≠stica y Probabilidades", credits:4, sem:6, pre:["cal2","alg2"], co:[] },
{ id:"termsup", name:"Termodin√°mica de Superficies", credits:4, sem:6, pre:["termmez","mecflu"], co:["transmat"] },
{ id:"transmat", name:"Transferencia de Materia", credits:4, sem:6, pre:["termmez"], co:["termsup"] },
{ id:"innov", name:"Innovaci√≥n", credits:3, sem:6, pre:[], co:[] },
{ id:"taller2", name:"Taller de Integraci√≥n 2", credits:2, sem:6, pre:["transcal"], co:[] },
{ id:"comp4", name:"Complementaria 4", credits:2, sem:6, pre:[], co:[] },

/* ================== SEMESTRE 7 ================== */
{ id:"econ", name:"Econom√≠a", credits:4, sem:7, pre:[], co:[] },
{ id:"react", name:"Dise√±o de Reactores Qu√≠micos", credits:5, sem:7, pre:["termsup"], co:[] },
{ id:"dinam", name:"Din√°mica y Control de Procesos", credits:5, sem:7, pre:["transmat"], co:["react"] },
{ id:"labproc", name:"Laboratorio de Procesos Qu√≠micos", credits:3, sem:7, pre:["transmat","transcal"], co:["react"] },
{ id:"ing1", name:"Ingl√©s Comunicativo 1", credits:3, sem:7, pre:[], co:[] },

/* ================== SEMESTRE 8 ================== */
{ id:"opsep", name:"Operaciones de Separaci√≥n", credits:3, sem:8, pre:["transmat"], co:[] },
{ id:"sint", name:"S√≠ntesis y Optimizaci√≥n de Procesos", credits:4, sem:8, pre:["react","transmat"], co:[] },
{ id:"ing2", name:"Ingl√©s Comunicativo 2", credits:3, sem:8, pre:["ing1"], co:[] },
{ id:"taller3", name:"Taller de Integraci√≥n 3", credits:2, sem:8, pre:["react"], co:[] },
{ id:"elec1", name:"Electiva 1", credits:6, sem:8, pre:[], co:[] },

/* ================== SEMESTRE 9 ================== */
{ id:"proy", name:"Formulaci√≥n y Evaluaci√≥n de Proyectos", credits:4, sem:9, pre:[], co:[] },
{ id:"proy1", name:"Proyecto 1", credits:4, sem:9, pre:["sint"], co:[] },
{ id:"sust", name:"Introducci√≥n a la Sustentabilidad", credits:3, sem:9, pre:[], co:[] },
{ id:"ing3", name:"Ingl√©s Comunicativo 3", credits:3, sem:9, pre:["ing2"], co:[] },
{ id:"elec2", name:"Electiva 2", credits:6, sem:9, pre:[], co:[] },

/* ================== SEMESTRE 10 ================== */
{ id:"gest", name:"Gesti√≥n de Empresas", credits:3, sem:10, pre:[], co:[] },
{ id:"proy2", name:"Proyecto 2", credits:4, sem:10, pre:["proy1"], co:[] },
{ id:"riesgos", name:"Gesti√≥n de Riesgos Qu√≠micos", credits:3, sem:10, pre:[], co:[] },
{ id:"ing4", name:"Ingl√©s Comunicativo 4", credits:3, sem:10, pre:["ing3"], co:[] },
{ id:"elec3", name:"Electiva 3", credits:6, sem:10, pre:[], co:[] },

/* ================== SEMESTRE 11 ================== */
{ id:"pracprof", name:"Pr√°ctica Profesional", credits:4, sem:11, pre:[], co:[] },
{ id:"memoria", name:"Memoria de T√≠tulo", credits:20, sem:11, pre:[], co:[] }
];

let state = JSON.parse(localStorage.getItem("malla")) || {};

function resetMalla() {
    if (confirm("¬øSeguro que deseas reiniciar toda la malla?")) {
        localStorage.removeItem("malla");
        state = {};
        render();
    }
}

function canUnlock(course) {
    return course.pre.every(p => state[p]);
}

function render() {
    const grid = document.getElementById("grid");
    grid.innerHTML = "";

    let totalCredits = courses.reduce((a,b)=>a+b.credits,0);
    let approvedCredits = 0;
    let approvedCount = 0;

    for (let s = 1; s <= 11; s++) {
        const box = document.createElement("div");
        box.className = "semester";
        box.innerHTML = `<h3>Semestre ${s}</h3>`;

        courses.filter(c => c.sem === s).forEach(c => {
            const div = document.createElement("div");
            div.className = "course";
            div.id = c.id;

            if (state[c.id]) {
                div.classList.add("completed");
                approvedCredits += c.credits;
                approvedCount++;
            } else if (!canUnlock(c)) {
                div.classList.add("locked");
            } else {
                div.classList.add("available");
            }

            div.innerHTML = `${c.name}<br><small>${c.credits} cr√©ditos</small>`;

            div.onclick = () => {
                state[c.id] = !state[c.id];
                localStorage.setItem("malla", JSON.stringify(state));
                render();
            };

            div.ondblclick = () => {
                document.querySelectorAll(".course").forEach(e => {
                    e.classList.remove("prereq","coreq");
                });
                c.pre.forEach(p => document.getElementById(p)?.classList.add("prereq"));
                c.co.forEach(co => document.getElementById(co)?.classList.add("coreq"));
            };

            box.appendChild(div);
        });

        grid.appendChild(box);
    }

    document.getElementById("stats").innerHTML =
        `Ramos aprobados: ${approvedCount} / ${courses.length} | Cr√©ditos aprobados: ${approvedCredits} / ${totalCredits} | Avance: ${Math.round((approvedCredits / totalCredits) * 100)}%`;
}

render();
</script>

</body>
</html>
